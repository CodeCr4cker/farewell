<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/CodeCr4cker/Web-Storage/main/Farewell-invitation-card/images/favicon.jpg" type="image/jpg" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <title>Golden Days of Our Batch</title>
        <meta name="description" content="Ending with Beautiful Beginnings">
         <meta name="description" content="
           This farewell website has been beautifully designed By Divyanshu Pandey to honor 
           and Celebrate the journey of all students of Class 12th As we say goodbye to this 
           wonderful chapter,let's celebrate the moments that made out time together unforgettable!"> 
         <meta name="description" content="">
    
    <meta property="og:image" content="https://raw.githubusercontent.com/CodeCr4cker/Web-Storage/main/Farewell-invitation-card/images/favicon.jpg">
<!--<meta property="og:url" content="https://farewell2025.netlify.app"> -->
<meta property="og:type" content="website">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0a0e27;
            --secondary-dark: #141b2d;
            --accent-gold: #d4af37;
            --accent-purple: #8b5cf6;
            --text-light: #e2e8f0;
            --text-muted: #94a3b8;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--text-light);
            overflow-x: hidden;
            min-height: 100vh;
        }

        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease-out;
        }

        .loader-ring {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: var(--accent-gold);
            animation: rotate 1.5s linear infinite;
        }

        .loader-ring:nth-child(2) {
            width: 120px;
            height: 120px;
            border-top-color: var(--accent-purple);
            animation-duration: 2s;
            animation-direction: reverse;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .curtain-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 9999;
            display: flex;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }

        .curtain-container.visible {
            opacity: 1;
        }

        .curtain-left, .curtain-right {
            width: 50%;
            height: 100%;
            background: repeating-linear-gradient(
                to right,
                #8b0000 0px,
                #a00000 40px,
                #6b0000 80px,
                #8b0000 120px
            );
            position: relative;
            transition: transform 2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .curtain-left {
            transform-origin: left;
            box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
        }

        .curtain-right {
            transform-origin: right;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
        }

        .curtain-container.open .curtain-left {
            transform: translateX(-100%);
        }

        .curtain-container.open .curtain-right {
            transform: translateX(100%);
        }

        .curtain-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200%;
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: var(--accent-gold);
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            pointer-events: none;
            animation: curtainTextPulse 2s ease-in-out infinite;
        }

        @keyframes curtainTextPulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .curtain-instruction {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--accent-gold);
            font-size: 1.2rem;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        .nav-bar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            z-index: 1000;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            transform: translateY(-100%);
            transition: transform 0.5s ease-out;
        }

        .nav-bar.visible {
            transform: translateY(0);
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.95rem;
        }

        .nav-links a:hover {
            color: var(--accent-gold);
        }

        .hero-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 100px 2rem 2rem;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .hero-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .hero-content {
            text-align: center;
            max-width: 800px;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--text-muted);
            margin-bottom: 2rem;
        }

        .hero-details {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            animation: slideUp 1s ease-out 0.5s both;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-details p {
            margin: 0.5rem 0;
            font-size: 1.1rem;
        }

        .highlight {
            color: var(--accent-gold);
            font-weight: 600;
        }

        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 3rem 0;
            animation: fadeIn 1s ease-out 1s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .countdown-item {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            padding: 2rem 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .countdown-item:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }

        .countdown-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-gold);
            display: block;
        }

        .countdown-label {
            color: var(--text-muted);
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .countdown-finished {
            background: rgba(139, 92, 246, 0.15);
            border: 2px solid var(--accent-gold);
            border-radius: 20px;
            padding: 2rem;
            margin: 3rem 0;
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }
            50% { box-shadow: 0 0 40px rgba(212, 175, 55, 0.6); }
        }

        .countdown-finished h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .countdown-finished p {
            font-size: 1.2rem;
            color: var(--text-light);
            margin: 0.5rem 0;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-gold), #b8941f);
            color: var(--primary-dark);
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            margin: 0.5rem;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
        }

        .btn-secondary {
            background: rgba(139, 92, 246, 0.2);
            color: var(--text-light);
            border: 2px solid var(--accent-purple);
        }

        .gallery-section {
            padding: 5rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .gallery-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .section-description {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        .gallery-lock {
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.02);
            border: 2px dashed rgba(212, 175, 55, 0.3);
            border-radius: 20px;
            padding: 3rem;
            transition: all 0.5s ease-out;
        }

        .gallery-lock.unlocking {
            opacity: 0;
            transform: scale(0.9);
        }

        .lock-icon {
            font-size: 4rem;
            color: var(--accent-gold);
            margin-bottom: 2rem;
            animation: lockPulse 2s infinite;
        }

        @keyframes lockPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .lock-message {
            font-size: 1.3rem;
            text-align: center;
            margin-bottom: 2rem;
            max-width: 500px;
        }

        .gallery-grid {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .gallery-grid.unlocked {
            display: grid;
            animation: gridFadeIn 0.8s ease-out;
        }

        @keyframes gridFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
            animation: itemPopIn 0.5s ease-out both;
        }

        .gallery-item:nth-child(n) {
            animation-delay: calc(0.05s * var(--item-index));
        }

        @keyframes itemPopIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-item.video::before {
            content: '\f04b';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: white;
            z-index: 1;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
        }

        .gallery-item.video::after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .close-gallery-btn {
            display: none;
            position: fixed;
            top: 90px;
            right: 2rem;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
            transition: all 0.3s;
            animation: slideInDown 0.5s ease-out;
        }

        @keyframes slideInDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-gallery-btn.visible {
            display: block;
        }

        .close-gallery-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(239, 68, 68, 0.5);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal.active {
            display: flex;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--secondary-dark);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 100%;
            position: relative;
            border: 1px solid rgba(212, 175, 55, 0.2);
            animation: modalSlideUp 0.3s ease-out;
        }

        @keyframes modalSlideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--accent-gold);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 1.1rem;
            text-align: center;
            letter-spacing: 5px;
            margin: 1rem 0;
            transition: border-color 0.3s;
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .error-message {
            color: #ef4444;
            text-align: center;
            margin: 1rem 0;
            display: none;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--text-light);
        }

        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
            animation: modalFadeIn 0.3s ease-out;
        }

        .lightbox-content {
            max-width: 95%;
            max-height: 95%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: modalSlideUp 0.3s ease-out;
        }

        .lightbox-content img,
        .lightbox-content video {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 10px;
            cursor: zoom-in;
            transition: transform 0.3s ease;
        }

        .lightbox-content img.zoomed {
            cursor: zoom-out;
            transform: scale(1.5);
            max-width: none;
            max-height: none;
        }

        .lightbox-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(239, 68, 68, 0.9);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10;
        }

        .lightbox-close:hover {
            background: rgba(239, 68, 68, 1);
            transform: scale(1.1);
        }

        .footer {
            text-align: center;
            padding: 3rem 2rem;
            background: rgba(0, 0, 0, 0.3);
            margin-top: 5rem;
        }

        .footer-text {
            color: var(--text-muted);
            margin: 0.5rem 0;
        }

        .footer-link {
            color: var(--accent-gold);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-link:hover {
            color: var(--text-light);
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 3rem;
            }

            .countdown-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .nav-links {
                display: none;
            }

            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 1rem;
            }

            .curtain-text {
                font-size: 2rem;
            }

            .close-gallery-btn {
                top: 80px;
                right: 1rem;
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }

            .countdown-finished h2 {
                font-size: 1.8rem;
            }

            .countdown-finished p {
                font-size: 1rem;
            }
        }

        .main-content {
            display: none;
        }

        .main-content.visible {
            display: block;
        }

        .success-notification {
            position: fixed;
            top: 100px;
            right: 2rem;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
            z-index: 10001;
            animation: slideInRight 0.5s ease-out, slideOutRight 0.5s ease-out 2.5s;
            pointer-events: none;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="loader-container" id="loader">
        <div class="loader-ring"></div>
        <div class="loader-ring"></div>
    </div>

    <div class="curtain-container" id="curtain">
        <div class="curtain-left"></div>
        <div class="curtain-right"></div>
        <div class="curtain-instruction">
            <i class="fas fa-hand-pointer"></i> Click anywhere to enter
        </div>
    </div>

    <audio id="mainAudio" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="galleryAudio" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
    </audio>

    <div class="main-content" id="mainContent">
        <nav class="nav-bar" id="navBar">
            <div class="nav-content">
                <div class="nav-logo">Farewell 2025</div>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#gallery">Gallery</a></li>
                    <li><a href="#details">Details</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </nav>

        <section class="hero-section" id="home">
            <div class="hero-content">
                <h1 class="hero-title">Farewell</h1>
                <p class="hero-subtitle">Celebration 2025</p>
                
                <div class="hero-details">
                    <p>Join us for an unforgettable evening on</p>
                    <p><span class="highlight">28 December 2025</span></p>
                    <p>at <span class="highlight">Ashirwad Garden</span>, Ratu, Ranchi</p>
                    <p style="margin-top: 1rem; font-size: 0.95rem; color: var(--text-muted);">
                        Organized by Class 12th, Session 2025-26
                    </p>
                </div>

                <div id="countdownContainer">
                    <div class="countdown-grid" id="countdown"></div>
                </div>

                <div>
                    <button class="btn-primary" onclick="openPersonalInvitationModal()">
                        <i class="fas fa-id-card"></i> Personal Invitation
                    </button>
                    <button class="btn-primary btn-secondary" onclick="downloadPublicInvitation()">
                        <i class="fas fa-download"></i> Public Invitation
                    </button>
                    <button class="btn-primary" onclick="scrollToGallery()">
                        <i class="fas fa-images"></i> View Gallery
                    </button>
                </div>
            </div>
        </section>

        <section class="gallery-section" id="gallery">
            <div class="section-header">
                <h2 class="section-title">Memory Gallery</h2>
                <p class="section-description">
                    A collection of our precious moments together
                </p>
            </div>

            <div class="gallery-lock" id="galleryLock">
                <div class="lock-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <button class="btn-primary" onclick="openGalleryModal()">
                    <i class="fas fa-key"></i> Enter Access Code
                </button>
            </div>

            <div class="gallery-grid" id="galleryGrid"></div>
        </section>

        <button class="close-gallery-btn" id="closeGalleryBtn" onclick="closeGallery()">
            <i class="fas fa-times"></i> Close Gallery
        </button>

        <footer class="footer" id="contact">
            <p class="footer-text">
                Can't wait to make this farewell memorable with you!
            </p>
            <p class="footer-text">
                 <a href="https://its-divyanshu.netlify.app/" class="footer-link">Contact Me</a>
            </p>
            <p class="footer-text" style="margin-top: 1rem;">
                © Divyanshu Pandey 
            </p>
        </footer>
    </div>

    <div class="modal" id="galleryModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeGalleryModal()">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Gallery Access</h2>
            <p style="text-align: center; color: var(--text-muted); margin-bottom: 1.5rem;">
                Enter the 6-character access code
            </p>
            <input 
                type="text" 
                class="modal-input" 
                id="galleryCode" 
                placeholder="------"
                maxlength="6"
            >
            <div class="error-message" id="errorMessage">
                Invalid access code. Please try again.
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="verifyGalleryCode()">
                <i class="fas fa-unlock"></i> Unlock Gallery
            </button>
        </div>
    </div>

    <div class="modal" id="personalInvitationModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closePersonalInvitationModal()">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Personal Invitation</h2>
            <p style="text-align: center; color: var(--text-muted); margin-bottom: 1.5rem;">
                Enter your credentials to generate invitation
            </p>
            <input 
                type="text" 
                class="modal-input" 
                id="username" 
                placeholder="Username"
                style="letter-spacing: normal; text-align: left;"
            >
            <input 
                type="password" 
                class="modal-input" 
                id="password" 
                placeholder="Password"
                style="letter-spacing: normal; text-align: left;"
            >
            <div class="error-message" id="invitationError">
                Invalid credentials. Please try again.
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="generatePersonalInvitation()">
                <i class="fas fa-download"></i> Generate & Download
            </button>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">
                <i class="fas fa-times"></i>
            </button>
            <div id="lightboxMedia"></div>
        </div>
    </div>

    <script>
        // ========== CONFIGURATION SECTION - EASY TO UPDATE ==========
        
        // Gallery Access Code
        const GALLERY_CODE = '12BL25';
        
        // Public Invitation PDF URL
        const PUBLIC_INVITATION_PDF = 'https://your-domain.com/public-invitation.pdf';  // Add your public PDF URL here
        
        // User Database for Personal Invitations (username: {password, name, pdfUrl})
        const userDatabase = {
            'divyanshu': { 
                password: 'div123', 
                name: 'Divyanshu Pandey',
                pdfUrl: 'https://your-domain.com/invitations/divyanshu-invitation.pdf'
            },
            'rahul': { 
                password: 'rahul456', 
                name: 'Rahul Kumar',
                pdfUrl: 'https://your-domain.com/invitations/rahul-invitation.pdf'
            },
            'priya': { 
                password: 'priya789', 
                name: 'Priya Sharma',
                pdfUrl: 'https://your-domain.com/invitations/priya-invitation.pdf'
            },
            'amit': { 
                password: 'amit321', 
                name: 'Amit Singh',
                pdfUrl: 'https://your-domain.com/invitations/amit-invitation.pdf'
            },
            'neha': { 
                password: 'neha654', 
                name: 'Neha Verma',
                pdfUrl: 'https://your-domain.com/invitations/neha-invitation.pdf'
            },
            'rohit': { 
                password: 'rohit987', 
                name: 'Rohit Gupta',
                pdfUrl: 'https://your-domain.com/invitations/rohit-invitation.pdf'
            },
            'sneha': { 
                password: 'sneha147', 
                name: 'Sneha Patel',
                pdfUrl: 'https://your-domain.com/invitations/sneha-invitation.pdf'
            },
            'vikram': { 
                password: 'vikram258', 
                name: 'Vikram Reddy',
                pdfUrl: 'https://your-domain.com/invitations/vikram-invitation.pdf'
            },
            'anjali': { 
                password: 'anjali369', 
                name: 'Anjali Nair',
                pdfUrl: 'https://your-domain.com/invitations/anjali-invitation.pdf'
            },
            'arjun': { 
                password: 'arjun741', 
                name: 'Arjun Mehta',
                pdfUrl: 'https://your-domain.com/invitations/arjun-invitation.pdf'
            },
            'pooja': { 
                password: 'pooja852', 
                name: 'Pooja Das',
                pdfUrl: 'https://your-domain.com/invitations/pooja-invitation.pdf'
            },
            'karan': { 
                password: 'karan963', 
                name: 'Karan Joshi',
                pdfUrl: 'https://your-domain.com/invitations/karan-invitation.pdf'
            }
        };
        
        // FIXED PHOTO LINKS - Using jsDelivr CDN (Works with CORS!)
// Replace your PHOTO_LINKS array with this

const PHOTO_LINKS = [
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(1).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(2).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(3).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(4).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(5).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(6).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(7).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(8).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(9).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(10).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(11).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(12).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(13).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(14).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(15).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(16).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(17).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(18).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(19).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(20).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(21).jpg',
    'https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/Farewell-invitation-card/images/B%20L%20Academy(22).jpg',
];

// WHAT CHANGED:
// ❌ OLD: https://raw.githubusercontent.com/CodeCr4cker/Web-Storage/main/...
// ✅ NEW: https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/...

// jsDelivr automatically serves from the latest commit and includes proper CORS headers!

// INSTRUCTIONS:
// 1. Open your HTML file in a text editor
// 2. Find the PHOTO_LINKS array (around line 1088)
// 3. Replace the entire array with this one
// 4. Save the file
// 5. Hard refresh your browser (Ctrl+Shift+R or Cmd+Shift+R)
// 6. Enter gallery code: 12BL25
// 7. Photos should now display!

// ALTERNATIVE METHOD - Find & Replace:
// Find:    https://github.com/CodeCr4cker/Web-Storage/blob/main/
// Replace: https://cdn.jsdelivr.net/gh/CodeCr4cker/Web-Storage/
        
        const VIDEO_LINKS = [
            // Add your video URLs here (one per line)
            'https://www.w3schools.com/html/mov_bbb.mp4',
            'https://www.w3schools.com/html/movie.mp4',
            // Add more video URLs as needed
        ];
        
        // Video Thumbnail Links (optional - one for each video)
        const VIDEO_THUMBNAILS = [
            'https://picsum.photos/300/300?random=50',
            'https://picsum.photos/300/300?random=51',
            // Add more thumbnail URLs matching your videos
        ];
        
        // Message to display after countdown finishes
        const COUNTDOWN_FINISHED_MESSAGE = {
            title: '🎉 The Big Day is Here! 🎉',
            subtitle: 'Hope you had an amazing time at the farewell!',
            message: 'Thank you for being part of this incredible journey. May all your dreams come true! 💫'
        };
        
        // ========== END OF CONFIGURATION SECTION ==========
        
        let galleryUnlocked = false;
        let currentLightboxIndex = 0;
        let galleryItems = [];
        let mainAudio, galleryAudio;
        let isMainAudioPlaying = false;
        let isGalleryAudioPlaying = false;
        let imageZoomed = false;
        let countdownFinished = false;

        // Generate gallery data from provided links
        function generateGalleryData() {
            const items = [];
            
            // Add photos
            PHOTO_LINKS.forEach((url, index) => {
                items.push({
                    type: 'photo',
                    url: url,
                    thumb: url
                });
            });
            
            // Add videos
            VIDEO_LINKS.forEach((url, index) => {
                items.push({
                    type: 'video',
                    url: url,
                    thumb: VIDEO_THUMBNAILS[index] || 'https://picsum.photos/300/300?random=' + (50 + index)
                });
            });
            
            return items;
        }

        window.addEventListener('load', () => {
            mainAudio = document.getElementById('mainAudio');
            galleryAudio = document.getElementById('galleryAudio');
            
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loader').style.display = 'none';
                    document.getElementById('curtain').classList.add('visible');
                }, 500);
            }, 2000);
        });

        document.getElementById('curtain').addEventListener('click', function() {
            this.classList.add('open');
            
            mainAudio.play().then(() => {
                isMainAudioPlaying = true;
            }).catch(e => console.log('Audio play failed:', e));
            
            setTimeout(() => {
                this.style.display = 'none';
                document.getElementById('mainContent').classList.add('visible');
                document.getElementById('navBar').classList.add('visible');
                
                setTimeout(() => {
                    document.getElementById('home').classList.add('visible');
                }, 100);
                
                observeSection();
                startCountdown();
            }, 2000);
        });

        function observeSection() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });
            
            observer.observe(document.getElementById('gallery'));
        }

        function startCountdown() {
            const countDownDate = new Date('Dec 28, 2025 15:00:00').getTime();
            
            const timer = setInterval(() => {
                const now = new Date().getTime();
                const distance = countDownDate - now;
                
                if (distance < 0 && !countdownFinished) {
                    clearInterval(timer);
                    countdownFinished = true;
                    displayCountdownFinished();
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                document.getElementById('countdown').innerHTML = `
                    <div class="countdown-item">
                        <span class="countdown-number">${days}</span>
                        <span class="countdown-label">Days</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">${hours}</span>
                        <span class="countdown-label">Hours</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">${minutes}</span>
                        <span class="countdown-label">Minutes</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">${seconds}</span>
                        <span class="countdown-label">Seconds</span>
                    </div>
                `;
            }, 1000);
        }

        function displayCountdownFinished() {
            const container = document.getElementById('countdownContainer');
            container.innerHTML = `
                <div class="countdown-finished">
                    <h2>${COUNTDOWN_FINISHED_MESSAGE.title}</h2>
                    <p style="font-size: 1.3rem; margin-top: 1rem;">${COUNTDOWN_FINISHED_MESSAGE.subtitle}</p>
                    <p style="margin-top: 1rem;">${COUNTDOWN_FINISHED_MESSAGE.message}</p>
                </div>
            `;
        }

        function openGalleryModal() {
            document.getElementById('galleryModal').classList.add('active');
            document.getElementById('galleryCode').focus();
        }

        function closeGalleryModal() {
            document.getElementById('galleryModal').classList.remove('active');
            document.getElementById('galleryCode').value = '';
            document.getElementById('errorMessage').style.display = 'none';
        }

        function verifyGalleryCode() {
            const code = document.getElementById('galleryCode').value.trim().toUpperCase();
            const errorMsg = document.getElementById('errorMessage');
            
            if (code === GALLERY_CODE) {
                galleryUnlocked = true;
                closeGalleryModal();
                unlockGallery();
                showSuccessNotification('Gallery Unlocked Successfully!');
            } else {
                errorMsg.style.display = 'block';
                document.getElementById('galleryCode').value = '';
                setTimeout(() => {
                    errorMsg.style.display = 'none';
                }, 3000);
            }
        }

        function unlockGallery() {
            const lockElement = document.getElementById('galleryLock');
            lockElement.classList.add('unlocking');
            
            if (isMainAudioPlaying) {
                mainAudio.pause();
                isMainAudioPlaying = false;
            }
            
            galleryAudio.play().then(() => {
                isGalleryAudioPlaying = true;
            }).catch(e => console.log('Gallery audio play failed:', e));
            
            setTimeout(() => {
                lockElement.style.display = 'none';
                const grid = document.getElementById('galleryGrid');
                grid.classList.add('unlocked');
                
                document.getElementById('closeGalleryBtn').classList.add('visible');
                
                galleryItems = generateGalleryData();
                
                galleryItems.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = `gallery-item ${item.type}`;
                    div.style.setProperty('--item-index', index);
                    div.onclick = () => openLightbox(index);
                    
                    div.innerHTML = `<img src="${item.thumb}" alt="${item.type === 'photo' ? 'Photo' : 'Video'} ${index + 1}">`;
                    
                    grid.appendChild(div);
                });
            }, 500);
        }

        function closeGallery() {
            const grid = document.getElementById('galleryGrid');
            const lockElement = document.getElementById('galleryLock');
            
            grid.style.opacity = '0';
            grid.style.transform = 'scale(0.95)';
            
            document.getElementById('closeGalleryBtn').classList.remove('visible');
            
            if (isGalleryAudioPlaying) {
                galleryAudio.pause();
                isGalleryAudioPlaying = false;
            }
            
            mainAudio.play().then(() => {
                isMainAudioPlaying = true;
            }).catch(e => console.log('Main audio play failed:', e));
            
            setTimeout(() => {
                grid.innerHTML = '';
                grid.classList.remove('unlocked');
                grid.style.opacity = '';
                grid.style.transform = '';
                
                lockElement.style.display = 'flex';
                lockElement.classList.remove('unlocking');
                
                galleryUnlocked = false;
                
                showSuccessNotification('Gallery Closed');
            }, 500);
        }

        function openLightbox(index) {
            currentLightboxIndex = index;
            document.getElementById('lightbox').classList.add('active');
            imageZoomed = false;
            updateLightboxContent();
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            const media = document.getElementById('lightboxMedia');
            const video = media.querySelector('video');
            
            if (video) {
                video.pause();
                if (galleryUnlocked && !isGalleryAudioPlaying) {
                    galleryAudio.play().then(() => {
                        isGalleryAudioPlaying = true;
                    }).catch(e => console.log('Gallery audio resume failed:', e));
                }
            }
            
            imageZoomed = false;
        }

        function updateLightboxContent() {
            const item = galleryItems[currentLightboxIndex];
            const media = document.getElementById('lightboxMedia');
            
            if (item.type === 'photo') {
                media.innerHTML = `<img src="${item.url}" alt="Gallery" onclick="toggleImageZoom(event)">`;
            } else {
                if (isGalleryAudioPlaying) {
                    galleryAudio.pause();
                    isGalleryAudioPlaying = false;
                }
                
                media.innerHTML = `<video controls autoplay style="max-width: 100%; max-height: 90vh;" onended="resumeGalleryAudio()">
                    <source src="${item.url}" type="video/mp4">
                </video>`;
            }
        }

        function toggleImageZoom(event) {
            const img = event.target;
            imageZoomed = !imageZoomed;
            
            if (imageZoomed) {
                img.classList.add('zoomed');
            } else {
                img.classList.remove('zoomed');
            }
        }

        function resumeGalleryAudio() {
            if (galleryUnlocked && !isGalleryAudioPlaying) {
                galleryAudio.play().then(() => {
                    isGalleryAudioPlaying = true;
                }).catch(e => console.log('Gallery audio resume failed:', e));
            }
        }

        function openPersonalInvitationModal() {
            document.getElementById('personalInvitationModal').classList.add('active');
            document.getElementById('username').focus();
        }

        function closePersonalInvitationModal() {
            document.getElementById('personalInvitationModal').classList.remove('active');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('invitationError').style.display = 'none';
        }

        function generatePersonalInvitation() {
            const username = document.getElementById('username').value.trim().toLowerCase();
            const password = document.getElementById('password').value.trim();
            const errorMsg = document.getElementById('invitationError');
            
            const user = userDatabase[username];
            
            if (!user || user.password !== password) {
                errorMsg.style.display = 'block';
                setTimeout(() => {
                    errorMsg.style.display = 'none';
                }, 3000);
                return;
            }
            
            // Download the specific personal invitation PDF for this user
            downloadPDF(user.pdfUrl, `Farewell_Invitation_${user.name.replace(/\s+/g, '_')}.pdf`);
            closePersonalInvitationModal();
            showSuccessNotification(`Personal Invitation for ${user.name} Downloaded!`);
        }

        function downloadPublicInvitation() {
            // Download the public invitation PDF
            downloadPDF(PUBLIC_INVITATION_PDF, 'Farewell_Invitation_Public.pdf');
            showSuccessNotification('Public Invitation Downloaded!');
        }

        function downloadPDF(pdfUrl, filename) {
            // Create a temporary link element
            const link = document.createElement('a');
            link.href = pdfUrl;
            link.download = filename;
            link.target = '_blank';
            
            // Append to body, click, and remove
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function createInvitationCard(name, birthYear, isPersonal) {
            // This function is kept for backward compatibility or future use
            // Currently not used since PDFs are downloaded directly
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 1080;
            canvas.height = 1920;
            
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0a0e27');
            gradient.addColorStop(0.5, '#141b2d');
            gradient.addColorStop(1, '#0a0e27');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#d4af37';
            ctx.lineWidth = 8;
            ctx.strokeRect(60, 60, canvas.width - 120, canvas.height - 120);
            
            ctx.strokeStyle = '#8b5cf6';
            ctx.lineWidth = 3;
            ctx.strokeRect(80, 80, canvas.width - 160, canvas.height - 160);
            
            ctx.fillStyle = '#d4af37';
            ctx.font = 'bold 60px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('✨', canvas.width / 2, 200);
            
            ctx.fillStyle = '#d4af37';
            ctx.font = 'bold 120px Arial';
            ctx.fillText('FAREWELL', canvas.width / 2, 350);
            
            ctx.font = 'bold 80px Arial';
            ctx.fillStyle = '#8b5cf6';
            ctx.fillText('2025', canvas.width / 2, 450);
            
            if (isPersonal && name) {
                ctx.font = '50px Arial';
                ctx.fillStyle = '#e2e8f0';
                ctx.fillText('Dear', canvas.width / 2, 580);
                
                ctx.font = 'bold 70px Arial';
                ctx.fillStyle = '#d4af37';
                const maxWidth = canvas.width - 200;
                const nameMetrics = ctx.measureText(name);
                if (nameMetrics.width > maxWidth) {
                    const scale = maxWidth / nameMetrics.width;
                    ctx.save();
                    ctx.translate(canvas.width / 2, 670);
                    ctx.scale(scale, 1);
                    ctx.fillText(name, 0, 0);
                    ctx.restore();
                } else {
                    ctx.fillText(name, canvas.width / 2, 670);
                }
            } else {
                ctx.font = 'bold 60px Arial';
                ctx.fillStyle = '#e2e8f0';
                ctx.fillText('You\'re Cordially Invited', canvas.width / 2, 620);
            }
            
            ctx.strokeStyle = '#d4af37';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(200, isPersonal ? 760 : 720);
            ctx.lineTo(canvas.width - 200, isPersonal ? 760 : 720);
            ctx.stroke();
            
            const startY = isPersonal ? 860 : 820;
            ctx.font = '45px Arial';
            ctx.fillStyle = '#e2e8f0';
            ctx.fillText('Join us for an unforgettable evening', canvas.width / 2, startY);
            
            ctx.font = 'bold 55px Arial';
            ctx.fillStyle = '#d4af37';
            ctx.fillText('28 December 2025', canvas.width / 2, startY + 80);
            
            ctx.font = '45px Arial';
            ctx.fillStyle = '#e2e8f0';
            ctx.fillText('at 3:00 PM', canvas.width / 2, startY + 150);
            
            ctx.font = 'bold 50px Arial';
            ctx.fillStyle = '#8b5cf6';
            ctx.fillText('Ashirwad Garden', canvas.width / 2, startY + 250);
            
            ctx.font = '40px Arial';
            ctx.fillStyle = '#94a3b8';
            ctx.fillText('Ratu, Ranchi', canvas.width / 2, startY + 310);
            
            ctx.font = '38px Arial';
            ctx.fillStyle = '#e2e8f0';
            ctx.fillText('Dinner & Dancing to Follow', canvas.width / 2, startY + 410);
            
            ctx.font = '35px Arial';
            ctx.fillStyle = '#94a3b8';
            ctx.fillText('Dress Code: Semi-Formal', canvas.width / 2, startY + 470);
            
            ctx.font = '32px Arial';
            ctx.fillStyle = '#8b5cf6';
            ctx.fillText('Organized by Class 12th', canvas.width / 2, startY + 560);
            ctx.fillText('Session 2025-26, BL Academy', canvas.width / 2, startY + 610);
            
            ctx.fillStyle = '#d4af37';
            ctx.font = 'bold 50px Arial';
            ctx.fillText('✨ 💫 ✨', canvas.width / 2, canvas.height - 200);
            
            ctx.font = 'italic 35px Arial';
            ctx.fillStyle = '#94a3b8';
            ctx.fillText('Looking forward to celebrating with you!', canvas.width / 2, canvas.height - 100);
            
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = isPersonal 
                    ? `Farewell_Invitation_${name.replace(/\s+/g, '_')}.png`
                    : 'Farewell_Invitation_Public.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        }

        function showSuccessNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'success-notification';
            notification.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function scrollToGallery() {
            document.getElementById('gallery').scrollIntoView({ behavior: 'smooth' });
        }

        document.addEventListener('keydown', (e) => {
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'Escape') closeLightbox();
            }
            
            if (document.getElementById('galleryModal').classList.contains('active')) {
                if (e.key === 'Enter') verifyGalleryCode();
                if (e.key === 'Escape') closeGalleryModal();
            }
            
            if (document.getElementById('personalInvitationModal').classList.contains('active')) {
                if (e.key === 'Enter') generatePersonalInvitation();
                if (e.key === 'Escape') closePersonalInvitationModal();
            }
        });

        document.getElementById('galleryCode').addEventListener('input', function(e) {
            this.value = this.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        document.addEventListener('visibilitychange', function () {
            if (document.hidden) {
                if (isMainAudioPlaying) mainAudio.pause();
                if (isGalleryAudioPlaying) galleryAudio.pause();
            } else {
                if (isMainAudioPlaying && !galleryUnlocked) mainAudio.play().catch(console.log);
                if (isGalleryAudioPlaying && galleryUnlocked) galleryAudio.play().catch(console.log);
            }
        });
    </script>
</body>
</html>
